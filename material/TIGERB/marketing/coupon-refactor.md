# 优惠券服务整理

备选文章标题：
> [Skr-Shop]你想知道的优惠券业务，SkrShop来告诉你

经过两年的更新「SkrShop」已经构成了下面的架构：

<p align="center">
    <a href="http://cdn.tigerb.cn/20200627195439.jpg">
        <img src="http://cdn.tigerb.cn/20200627195439.jpg" width="100%">
    </a>
</p>

图中**紫色的内容**就是本编文章的主要内容：营销体系的基础服务「优惠券服务」。但是呢，首先要说的是关于**不断被催更**的事。

> 关于催更？

我给出了如下解释：人逢假日懒🤷‍♀️(我没错😭)、工作紧、需要保证质量，就酱。但是我一定能保证的是**一直会更新下去**，希望得到大家理解。

> 关于下期内容？

之前在Github上的Issues大家一致想看关于订单相关的内容，所以更新完本期「优惠券」之后就开始了**订单之旅**。

Issues如下：

- https://github.com/skr-shop/manuals/issues/25
- https://github.com/skr-shop/manuals/issues/18

进入正题，营销体系的基础服务「优惠券服务」。通过如下问题来介绍优惠券：

- 优惠券有**哪些类型**？
- 优惠券有**哪些适用范围**？
- 优惠券有**哪些常见的场景**？
- 优惠券服务要有**哪些服务能力**？
- 优惠券服务的**风控**怎么做？

## 优惠券有哪些类型？

对于获取优惠券的用户而言：关注的是优惠券的优惠能力，所以按优惠能力维度优惠券主要分为下面三类：

优惠能力维度|描述
------------|------------
满减券|满多少金额可以减多少金额
现金券|抵扣多少现金
折扣券|打多少折

对于发放优惠券的运营人员而言：

一种是，优惠券有效时间的开始结束具体时间，在创建优惠券的时候已经确定，用户在任意时间领取该券，该券的有效时间都是之前设置的有效时间的开始结束具体时间。

另一种是，创建优惠券设置的是有效时间段，比如7天有效时间、12小时有效时间等，这类优惠券以用户领取优惠券的时间为优惠券的有效时间的开始时间，以以用户领取优惠券的时间+有效时间为有效时间的结束时间。

有效期维度|优惠券类型|优惠券生效时间|优惠券失效时间|描述
------------|------------|------------|------------|------------
固定|固定有效期|优惠券类型被创建时已确定|优惠券类型被创建时已确定|无论用户什么时间领取该优惠券，优惠券生效的时间都是设置好的统一时间
动态|动态有效期|用户领取优惠券时，当前时间戳|用户领取优惠券时，当前时间戳+N*24*60*60|优惠券类型被创建时，只确定了该优惠券的有效，例如6小时、7天、一个月

小结如下：

<p align="center">
    <a href="http://cdn.tigerb.cn/20200627190414.jpg">
        <img src="http://cdn.tigerb.cn/20200627190414.jpg" width="100%">
    </a>
</p>

## 优惠券有哪些适用范围？

#### 运营策略

运营策略|描述
------------|------------
指定Sku|Sku券
指定Spu|Spu券
指定类别|类别券
指定店铺|店铺券
全场通用|平台券

#### 适用终端

适用终端|描述
------------|------------
Android|安卓端
iOS|iOS端
PC|网页电脑端
Mobile|网页手机端
Wechat|微信端
微信小程序|微信小程序
All|以上所有

#### 适用人群

适用人群|描述
------------|------------
白名单|测试用户
会员|会员专属

小结如下：

<p align="center">
    <a href="http://cdn.tigerb.cn/20200627192033.jpg">
        <img src="http://cdn.tigerb.cn/20200627192033.jpg" width="60%">
    </a>
</p>

## 优惠券有哪些常见的场景？

#### 展示优惠券场景

展示优惠券场景|描述
------------|------------
活动页面|大促、节假日活动页面展示获取优惠券的按钮
商品详情|商品详情页面展示领券入口、点击后展示可以领取的优惠券列表
个人中心-我的优惠券|我的优惠券列表
订单结算页面|结算页面，适用该订单的优惠券列表以及推荐


#### 选择优惠券场景

选择优惠券场景|描述
------------|------------
商品详情|商品详情页面展示该用户已有的，且适用于该商品的优惠券
订单结算页面-优惠券列表|选择可用优惠券结算
订单结算页面-输入优惠码|输入优惠码结算

#### 场景示例

场景示例|描述
------------|------------
活动页领券|大促、节假日活动页面展示获取优惠券的按钮
游戏发券|游戏奖励
商品页领券|-
店铺页领券|-
购物返券|购买某个Sku，订单妥投后发放优惠券
新用户发券|新用户注册发放优惠券
积分兑券|积分换取优惠券

小结如下：

<p align="center">
    <a href="http://cdn.tigerb.cn/20200627192326.jpg">
        <img src="http://cdn.tigerb.cn/20200627192326.jpg" width="60%">
    </a>
</p>

## 优惠券服务要有哪些服务能力？

#### 服务能力1: 发放优惠券

发放方式|描述
------------|------------
同步发放|适用于用户点击领券等实时性要求较高的获取券场景
异步发放|适用于实时性要求不高的发放券场景，比如新用户注册发券等场景

发放能力|描述
------------|------------
单张发放|指定一个优惠券类型ID，且指定一个UID只发一张该券
批量发放|指定一个优惠券类型ID，且指定一批UID，每个UID只发一张该券

发放类型|描述
------------|------------
优惠券类型标识|通过该优惠券类型的身份标识发放，比如创建一个优惠券类型时会生成一个16位标识码，用户通过`16位标识码`领取优惠券；这里不使用自增ID(避免对外泄露历史创建了的优惠券数量)，
优惠码code|创建一个优惠券类型时，运营人员会给该券填写一个6位左右的Ascall码，比如`SKR6a6`，用户通过该码领取优惠券

#### 服务能力2: 撤销优惠券

撤销能力|描述
------------|------------
单张撤销|指定一个优惠券类型ID，且指定一个UID只撤销一张该券
批量撤销|指定一个优惠券类型ID，且指定一批UID，每个UID撤销一张该券

#### 服务能力3: 查询优惠券

用户优惠券列表|子类|描述
------------|------------|------------
全部|-|查询该用户所有的优惠券
可以使用|全部|查询该用户所有可以使用的优惠券
-|适用于某个spu或sku|查询该用户适用于某个spu或sku可以使用的优惠券
-|适用于某个类别|查询该用户适用于某个类别可以使用的优惠券
-|适用于某个店铺|查询该用户适用于某个店铺可以使用的优惠券
无效|全部|查询该用户所有无效的优惠券
-|过期|查询该用户所有过期的优惠券
-|失效|查询该用户所有失效的优惠券

#### 服务能力4: 结算页优惠券推荐

订单结算页面推荐一张最适合该订单的优惠券

小结如下：

<p align="center">
    <a href="http://cdn.tigerb.cn/20200627192451.jpg">
        <img src="http://cdn.tigerb.cn/20200627192451.jpg" width="80%">
    </a>
</p>

## 优惠券服务的**风控**怎么做？

TODO